<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z7JXZZWPGW"></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTAG - Refactor</title>
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
  </head>

  <body>
    {% include "_nav.html" %}
    {% include "_form.html" %}

    <script>
      window.onload = function (event) {
        console.log("GTAG Refactor loaded...")

        var elements = document.getElementsByClassName('event-link-click');
        for (var i = 0; i < elements.length; i++) {
          elements[i].addEventListener('click', function(event) {
            event.preventDefault();

            if (window.dataLayer) {
              var anchor = event.target.closest('a');
              var data = {
                'event': 'gtag-refactor-click',
                'event_data': {
                  'event_category': 'link',
                  'event_label': anchor.getAttribute('id'),
                  'value': anchor.getAttribute('href')
                }
              };
              window.dataLayer.push(data);
            }

            console.log(window.dataLayer[window.dataLayer.length - 1]);
          })
        }
      }
    </script>
  </body>
</html>
