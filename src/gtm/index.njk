<!DOCTYPE html>
<html lang="en">
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WRPTLSK');</script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTM</title>
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
  </head>

  <body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRPTLSK"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    {% include "_nav.html" %}
    {% include "_form.html" %}

    <script>
      window.onload = function (event) {
        console.log("GTM loaded...")

        var elements = document.getElementsByClassName('event-link-click');
        for (var i = 0; i < elements.length; i++) {
          elements[i].addEventListener('click', function(event) {
            event.preventDefault();

            if (window.dataLayer) {
              var anchor = event.target.closest('a');
              var data = {
                'event': 'gtm-click',
                'event_data': {
                  'event_category': 'link',
                  'event_label': anchor.getAttribute('id'),
                  'value': anchor.getAttribute('href')
                }
              };
              window.dataLayer.push(data);
            }

            console.log(window.dataLayer[window.dataLayer.length - 1]);
          })
        }
      }
    </script>
  </body>
</html>
